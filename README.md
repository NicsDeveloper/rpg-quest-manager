# üêâ RPG Quest Manager - O Livro de Eldoria

<div align="center">

**API RESTful completa para gerenciamento de sistema RPG com her√≥is, quests, inimigos e recompensas**

[![.NET](https://img.shields.io/badge/.NET-8.0-512BD4?style=for-the-badge&logo=dotnet)](https://dotnet.microsoft.com/)
[![C#](https://img.shields.io/badge/C%23-12-239120?style=for-the-badge&logo=c-sharp)](https://docs.microsoft.com/en-us/dotnet/csharp/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-316192?style=for-the-badge&logo=postgresql)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-7-DC382D?style=for-the-badge&logo=redis)](https://redis.io/)
[![RabbitMQ](https://img.shields.io/badge/RabbitMQ-3-FF6600?style=for-the-badge&logo=rabbitmq)](https://www.rabbitmq.com/)
[![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?style=for-the-badge&logo=docker)](https://www.docker.com/)

[![Tests](https://img.shields.io/badge/Tests-19%20Passing-success?style=for-the-badge)]()
[![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)](LICENSE)

[Caracter√≠sticas](#-caracter√≠sticas) ‚Ä¢
[Instala√ß√£o](#-instala√ß√£o-r√°pida) ‚Ä¢
[Documenta√ß√£o](#-documenta√ß√£o-da-api) ‚Ä¢
[Arquitetura](#-arquitetura) ‚Ä¢
[Testes](#-testes)

</div>

---

## üìã √çndice

- [Sobre o Projeto](#-sobre-o-projeto)
- [Caracter√≠sticas](#-caracter√≠sticas)
- [Stack Tecnol√≥gica](#-stack-tecnol√≥gica)
- [Instala√ß√£o R√°pida](#-instala√ß√£o-r√°pida)
- [Documenta√ß√£o da API](#-documenta√ß√£o-da-api)
- [Arquitetura](#-arquitetura)
- [Testes](#-testes)
- [Vari√°veis de Ambiente](#-vari√°veis-de-ambiente)
- [Troubleshooting](#-troubleshooting)
- [Roadmap](#-roadmap)
- [Contribuindo](#-contribuindo)
- [Licen√ßa](#-licen√ßa)

---

## üéØ Sobre o Projeto

O **RPG Quest Manager** √© uma API RESTful completa desenvolvida em .NET 8 que implementa um sistema de gerenciamento de RPG. O projeto demonstra a aplica√ß√£o de conceitos avan√ßados de arquitetura de software, boas pr√°ticas de desenvolvimento e tecnologias modernas.

### üéÆ Conceito

Inspirado em jogos de RPG cl√°ssicos, a API permite:
- Criar e gerenciar her√≥is com diferentes classes e atributos
- Definir quests (miss√µes) com n√≠veis de dificuldade variados
- Cadastrar inimigos e recompensas
- Sistema autom√°tico de progress√£o de n√≠vel baseado em XP
- Gerenciamento de invent√°rio com itens equip√°veis
- Eventos ass√≠ncronos para notifica√ß√µes em tempo real

---

## ‚ú® Caracter√≠sticas

### üéØ Funcionalidades Principais

- ‚úÖ **Sistema de Autentica√ß√£o JWT com Roles** - Login, registro e controle de permiss√µes (Admin/Player)
- ‚úÖ **CRUD Completo de Her√≥is** - Gerenciamento de personagens com atributos customiz√°veis
- ‚úÖ **CRUD Completo de Quests** - Cria√ß√£o de miss√µes com recompensas vinculadas a itens reais
- ‚úÖ **CRUD Completo de Inimigos** - Cadastro de advers√°rios com caracter√≠sticas √∫nicas
- ‚úÖ **Sistema de Recompensas Inteligente** - Itens reais adicionados automaticamente ao invent√°rio
- ‚úÖ **Sistema de Invent√°rio Completo** - Gerenciamento de itens com equipamento e b√¥nus
- ‚úÖ **Progress√£o Autom√°tica** - Level up autom√°tico ao ganhar XP suficiente
- ‚úÖ **Cache Inteligente** - Redis para otimizar consultas frequentes (Top 10 her√≥is, Quests mais jogadas)
- ‚úÖ **Eventos Ass√≠ncronos** - RabbitMQ para notifica√ß√µes de conclus√£o de quests
- ‚úÖ **Valida√ß√µes Robustas** - FluentValidation em todas as entradas
- ‚úÖ **Logs Estruturados** - Serilog para rastreabilidade completa
- ‚úÖ **Documenta√ß√£o Swagger Completa** - API totalmente documentada com exemplos e descri√ß√µes detalhadas

### üåü Miss√µes Secretas (Recursos Avan√ßados)

- üîÆ **Sistema de Progress√£o Autom√°tica por XP**
  - F√≥rmula: `XP Necess√°rio = N√≠vel √ó 100`
  - Level up autom√°tico com aumento de atributos (+2 For√ßa, +2 Intelig√™ncia, +2 Destreza)
  - Suporte a m√∫ltiplos n√≠veis em uma √∫nica quest
  
- üéí **Sistema de Invent√°rio Completo**
  - Adicionar/remover itens
  - Equipar/desequipar itens
  - Itens com b√¥nus de atributos (For√ßa, Intelig√™ncia, Destreza)
  - **Itens de recompensa adicionados automaticamente ao completar quests**
  
- üîê **Sistema de Roles e Permiss√µes**
  - **Admin**: Controle total (CRUD de her√≥is, quests, inimigos, itens)
  - **Player**: Visualiza√ß√£o e gameplay (ver dados, completar quests, gerenciar invent√°rio)
  - Tokens JWT com 24h de validade
  - Hash seguro de senhas (SHA256)
  
- üéÅ **Sistema de Recompensas Inteligente**
  - Recompensas vinculadas a itens **reais** da tabela Items
  - Itens automaticamente adicionados ao invent√°rio do her√≥i
  - Suporte a quantidade de itens (stackable)
  
- üì® **Eventos Ass√≠ncronos**
  - Publica√ß√£o no RabbitMQ ao completar quests
  - Consumer para processamento de eventos
  - Logs estruturados de eventos

---

## üõ†Ô∏è Stack Tecnol√≥gica

### Backend & Framework
- **.NET 8** - Framework moderno e perform√°tico
- **C# 12** - √öltimas features da linguagem
- **ASP.NET Core** - Web API

### Banco de Dados & Cache
- **PostgreSQL 15** - Banco relacional robusto
- **Entity Framework Core 8** - ORM com migrations
- **Redis 7** - Cache distribu√≠do

### Mensageria
- **RabbitMQ 3** - Message broker
- **MassTransit 8** - Abstra√ß√£o para mensageria

### Seguran√ßa & Valida√ß√£o
- **JWT Bearer** - Autentica√ß√£o baseada em tokens
- **FluentValidation** - Valida√ß√£o declarativa
- **SHA256** - Hash de senhas

### Ferramentas & Qualidade
- **AutoMapper** - Mapeamento de objetos
- **Serilog** - Logs estruturados
- **Swagger/OpenAPI** - Documenta√ß√£o interativa
- **xUnit** - Framework de testes
- **Moq** - Mocking para testes
- **FluentAssertions** - Assertions leg√≠veis

### DevOps & Infraestrutura
- **Docker** - Containeriza√ß√£o
- **Docker Compose** - Orquestra√ß√£o multi-container
- **Health Checks** - Monitoramento de servi√ßos

---

## üöÄ Instala√ß√£o R√°pida

### Pr√©-requisitos

Certifique-se de ter instalado:
- [Docker Desktop](https://www.docker.com/products/docker-desktop) (Windows, Mac ou Linux)
- [Git](https://git-scm.com/downloads) (para clonar o reposit√≥rio)

> üí° **Nota**: N√£o √© necess√°rio instalar .NET, PostgreSQL, Redis ou RabbitMQ localmente. Tudo roda via Docker!

### Passo a Passo

1. **Clone o reposit√≥rio**
   ```bash
   git clone https://github.com/seu-usuario/rpg-quest-manager.git
   cd rpg-quest-manager
   ```

2. **Inicie o Docker Desktop**
   - Aguarde at√© o Docker estar completamente iniciado (√≠cone verde)

3. **Suba os containers**
   ```bash
   docker-compose up --build
   ```

4. **Aguarde a inicializa√ß√£o** (pode levar 1-2 minutos na primeira vez)
   
   Voc√™ ver√° mensagens como:
   ```
   rpg-postgres  | database system is ready to accept connections
   rpg-redis     | Ready to accept connections
   rpg-rabbitmq  | Server startup complete
   rpg-api       | üêâ RPG Quest Manager API iniciada!
   ```

5. **Acesse a API**
   ```
   http://localhost:5000
   ```

### ‚úÖ Verifica√ß√£o

Se tudo estiver funcionando, voc√™ ver√°:
- üåê **Swagger UI** em http://localhost:5000
- üê∞ **RabbitMQ Management** em http://localhost:15672 (guest/guest)
- ‚úÖ **Health Check** em http://localhost:5000/health

### üóÑÔ∏è Dados Iniciais (Seeder)

O banco de dados √© automaticamente populado com dados de exemplo:
- üë§ **3 usu√°rios**: `admin` (Admin), `player1` e `gamer` (Players)
- ‚öîÔ∏è **12 her√≥is** de diferentes classes e n√≠veis (1-20)
- üëπ **15 inimigos** variados (Goblins, Orcs, Drag√µes, Balrog, etc)
- üéØ **13 quests** de todas as dificuldades (F√°cil at√© √âpico)
- üó°Ô∏è **15 itens** equip√°veis (Espadas, Armaduras, Po√ß√µes, etc)
- üí∞ **Recompensas vinculadas** a itens reais

---

## üîê Sistema de Permiss√µes

O sistema possui dois tipos de usu√°rios com permiss√µes diferentes:

### üë§ Player (Usu√°rio Comum)

**PODE:**
- ‚úÖ Visualizar her√≥is, quests, inimigos, itens, recompensas
- ‚úÖ Completar quests e ganhar recompensas
- ‚úÖ Gerenciar invent√°rio (adicionar/equipar itens nos her√≥is)

**N√ÉO PODE:**
- ‚ùå Criar, editar ou deletar her√≥is
- ‚ùå Criar, editar ou deletar quests
- ‚ùå Criar, editar ou deletar inimigos
- ‚ùå Criar ou deletar itens
- ‚ùå Criar ou deletar recompensas

### üõ°Ô∏è Admin (Administrador)

**PODE TUDO:**
- üîê CRUD completo de her√≥is, quests, inimigos, itens e recompensas
- üîê Todas as funcionalidades de Player

### üìä Matriz de Permiss√µes

| Recurso | Player | Admin |
|---------|--------|-------|
| **Her√≥is** | üëÅÔ∏è Ver | ‚úÖ CRUD Completo |
| **Quests** | üëÅÔ∏è Ver + ‚úÖ Completar | ‚úÖ CRUD Completo |
| **Inimigos** | üëÅÔ∏è Ver | ‚úÖ CRUD Completo |
| **Itens** | üëÅÔ∏è Ver | ‚úÖ Criar/Deletar |
| **Recompensas** | üëÅÔ∏è Ver | ‚úÖ Criar/Deletar |
| **Invent√°rio** | ‚úÖ Gerenciar | ‚úÖ Gerenciar |

---

## üìö Documenta√ß√£o da API

### Swagger UI

A documenta√ß√£o completa e interativa est√° dispon√≠vel em:
```
http://localhost:5000
```

### Autentica√ß√£o

Todos os endpoints (exceto `/auth/register` e `/auth/login`) requerem autentica√ß√£o JWT.

#### üîë Usu√°rios Pr√©-cadastrados (Seeder)

| Username | Password | Role | Descri√ß√£o |
|----------|----------|------|-----------|
| `admin` | `admin123` | **Admin** | Acesso total ao sistema |
| `player1` | `senha123` | **Player** | Jogador comum |
| `gamer` | `senha123` | **Player** | Jogador comum |

#### 1. Login (Usu√°rio Existente)

```http
POST /api/v1/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}
```

**Resposta:**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "username": "admin",
  "expiresAt": "2025-10-03T10:30:00Z"
}
```

#### 2. Registrar um Novo Usu√°rio

```http
POST /api/v1/auth/register
Content-Type: application/json

{
  "username": "aragorn",
  "email": "aragorn@eldoria.com",
  "password": "senha123"
}
```

> ‚ö†Ô∏è **Nota**: Novos usu√°rios s√£o criados automaticamente como **Player** (sem permiss√µes de Admin).

**Resposta:**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "username": "aragorn",
  "expiresAt": "2025-10-03T12:00:00Z"
}
```

#### 3. Usar o Token

Adicione o token no header de todas as requisi√ß√µes:
```http
Authorization: Bearer seu_token_aqui
```

Ou use o bot√£o **"Authorize"** no Swagger UI.

---

### Endpoints Principais

#### üó°Ô∏è Her√≥is

| M√©todo | Endpoint | Descri√ß√£o | Permiss√£o |
|--------|----------|-----------|-----------|
| `GET` | `/api/v1/heroes` | Lista todos os her√≥is | Player |
| `GET` | `/api/v1/heroes/{id}` | Busca her√≥i por ID | Player |
| `GET` | `/api/v1/heroes/strongest` | Top her√≥is (CACHED) | Player |
| `POST` | `/api/v1/heroes` | Cria novo her√≥i | üîê **Admin** |
| `PUT` | `/api/v1/heroes/{id}` | Atualiza her√≥i | üîê **Admin** |
| `DELETE` | `/api/v1/heroes/{id}` | Remove her√≥i | üîê **Admin** |
| `GET` | `/api/v1/heroes/{id}/inventory` | Lista invent√°rio | Player |
| `POST` | `/api/v1/heroes/{id}/inventory/{itemId}` | Adiciona item | Player |
| `PUT` | `/api/v1/heroes/{id}/inventory/{heroItemId}/equip` | Equipa/desequipa item | Player |

#### üìú Quests

| M√©todo | Endpoint | Descri√ß√£o | Permiss√£o |
|--------|----------|-----------|-----------|
| `GET` | `/api/v1/quests` | Lista todas as quests (com recompensas e itens) | Player |
| `GET` | `/api/v1/quests/{id}` | Busca quest por ID | Player |
| `GET` | `/api/v1/quests/most-played` | Top quests (CACHED) | Player |
| `POST` | `/api/v1/quests` | Cria nova quest | üîê **Admin** |
| `PUT` | `/api/v1/quests/{id}` | Atualiza quest | üîê **Admin** |
| `DELETE` | `/api/v1/quests/{id}` | Remove quest | üîê **Admin** |
| `POST` | `/api/v1/quests/complete` | **üî• Completa quest (XP + Ouro + Item!)** | Player |

#### üëπ Inimigos

| M√©todo | Endpoint | Descri√ß√£o | Permiss√£o |
|--------|----------|-----------|-----------|
| `GET` | `/api/v1/enemies` | Lista todos os inimigos | Player |
| `GET` | `/api/v1/enemies/{id}` | Busca inimigo por ID | Player |
| `POST` | `/api/v1/enemies` | Cria novo inimigo | üîê **Admin** |
| `PUT` | `/api/v1/enemies/{id}` | Atualiza inimigo | üîê **Admin** |
| `DELETE` | `/api/v1/enemies/{id}` | Remove inimigo | üîê **Admin** |

#### üó°Ô∏è Itens

| M√©todo | Endpoint | Descri√ß√£o | Permiss√£o |
|--------|----------|-----------|-----------|
| `GET` | `/api/v1/items` | Lista todos os itens | Player |
| `GET` | `/api/v1/items/{id}` | Busca item por ID | Player |
| `POST` | `/api/v1/items` | Cria novo item | üîê **Admin** |
| `DELETE` | `/api/v1/items/{id}` | Remove item | üîê **Admin** |

#### üí∞ Recompensas

| M√©todo | Endpoint | Descri√ß√£o | Permiss√£o |
|--------|----------|-----------|-----------|
| `GET` | `/api/v1/rewards` | Lista todas as recompensas (com itens) | Player |
| `GET` | `/api/v1/rewards/{id}` | Busca recompensa por ID | Player |
| `GET` | `/api/v1/rewards/quest/{questId}` | Recompensas de uma quest | Player |
| `POST` | `/api/v1/rewards` | Cria nova recompensa | üîê **Admin** |
| `DELETE` | `/api/v1/rewards/{id}` | Remove recompensa | üîê **Admin** |

---

### Exemplo de Uso Completo

```bash
# 1. Login como Admin
curl -X POST http://localhost:5000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# Resposta: { "token": "eyJhbGc...", "username": "admin", ... }

# 2. Buscar Quests Dispon√≠veis (com recompensas)
curl -X GET http://localhost:5000/api/v1/quests \
  -H "Authorization: Bearer SEU_TOKEN_ADMIN"

# Resposta:
# [
#   {
#     "id": 1,
#     "name": "Ca√ßa aos Goblins",
#     "rewards": [{
#       "gold": 100,
#       "experience": 50,
#       "item": {
#         "name": "Espada de Ferro",
#         "bonusStrength": 5
#       }
#     }]
#   }
# ]

# 3. Completar Quest (Her√≥i ganha XP, Ouro E o Item automaticamente!)
curl -X POST http://localhost:5000/api/v1/quests/complete \
  -H "Authorization: Bearer SEU_TOKEN_ADMIN" \
  -H "Content-Type: application/json" \
  -d '{"heroId":12,"questId":1}'

# ‚úÖ Resultado:
# - Her√≥i ganhou 50 XP (pode subir de n√≠vel!)
# - Her√≥i ganhou 100 de ouro
# - Espada de Ferro foi adicionada automaticamente ao invent√°rio!

# 4. Verificar Invent√°rio do Her√≥i
curl -X GET http://localhost:5000/api/v1/heroes/12 \
  -H "Authorization: Bearer SEU_TOKEN_ADMIN"

# Resposta mostra o her√≥i com novo n√≠vel, XP, ouro e item no invent√°rio!
```

---

## üèóÔ∏è Arquitetura

### Estrutura do Projeto

```
rpg-quest-manager/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ RpgQuestManager.Api/
‚îÇ       ‚îú‚îÄ‚îÄ Controllers/          # Endpoints da API (6 controllers)
‚îÇ       ‚îú‚îÄ‚îÄ Models/               # Entidades do dom√≠nio (9 models)
‚îÇ       ‚îú‚îÄ‚îÄ Data/                 # DbContext + Migrations
‚îÇ       ‚îú‚îÄ‚îÄ Services/             # L√≥gica de neg√≥cio
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ AuthService       # Autentica√ß√£o JWT
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ QuestService      # L√≥gica de quests
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ CacheService      # Integra√ß√£o Redis
‚îÇ       ‚îú‚îÄ‚îÄ DTOs/                 # Data Transfer Objects (17 DTOs)
‚îÇ       ‚îú‚îÄ‚îÄ Validators/           # FluentValidation (4 validators)
‚îÇ       ‚îú‚îÄ‚îÄ Middleware/           # Tratamento de erros
‚îÇ       ‚îú‚îÄ‚îÄ Events/               # Eventos RabbitMQ
‚îÇ       ‚îî‚îÄ‚îÄ Consumers/            # Consumidores de eventos
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ RpgQuestManager.Tests/   # Testes unit√°rios (19 testes)
‚îú‚îÄ‚îÄ docker-compose.yml            # Orquestra√ß√£o
‚îú‚îÄ‚îÄ Dockerfile                    # Imagem da API
‚îî‚îÄ‚îÄ README.md                     # Este arquivo
```

### Diagrama de Arquitetura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         Cliente                              ‚îÇ
‚îÇ                     (Swagger / Postman)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ HTTP/HTTPS
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    API (.NET 8)                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ Controllers ‚îÇ‚Üí ‚îÇ   Services   ‚îÇ‚Üí ‚îÇ  Repository  ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ         ‚îÇ                 ‚îÇ                  ‚îÇ               ‚îÇ
‚îÇ         ‚ñº                 ‚ñº                  ‚ñº               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ  Middleware ‚îÇ  ‚îÇ FluentValid. ‚îÇ  ‚îÇ   AutoMapper ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                      ‚îÇ                      ‚îÇ
       ‚ñº                      ‚ñº                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PostgreSQL  ‚îÇ       ‚îÇ    Redis    ‚îÇ       ‚îÇ  RabbitMQ   ‚îÇ
‚îÇ  (Banco)    ‚îÇ       ‚îÇ   (Cache)   ‚îÇ       ‚îÇ  (Events)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Fluxo de Conclus√£o de Quest

```mermaid
sequenceDiagram
    participant C as Cliente
    participant API as API Controller
    participant S as Quest Service
    participant DB as PostgreSQL
    participant R as RabbitMQ
    participant Cache as Redis

    C->>API: POST /quests/complete
    API->>S: CompleteQuestAsync(heroId, questId)
    S->>DB: Busca Hero e Quest (com Rewards e Items)
    S->>S: Aplica recompensas (XP + Gold)
    
    Note over S: üéÅ Sistema de Recompensas
    loop Para cada Reward da Quest
        alt Reward tem Item vinculado
            S->>DB: Busca HeroItem no invent√°rio
            alt Item j√° existe
                S->>DB: Aumenta quantidade do item
            else Item novo
                S->>DB: Adiciona item ao invent√°rio
            end
        end
    end
    
    Note over S: üîÆ Sistema de Level Up
    S->>S: Verifica level up
    alt Tem XP suficiente
        S->>S: Hero.LevelUp() (recursivo)
        Note over S: +2 STR, +2 INT, +2 DEX
    end
    
    S->>DB: SaveChanges()
    S->>R: Publica QuestCompletedEvent
    S->>Cache: Invalida cache do her√≥i
    S-->>API: QuestDto (com rewards e items)
    API-->>C: 200 OK
```

### Tecnologias por Camada

| Camada | Tecnologias |
|--------|-------------|
| **Apresenta√ß√£o** | ASP.NET Core Controllers, Swagger |
| **Aplica√ß√£o** | Services, DTOs, AutoMapper |
| **Dom√≠nio** | Models, Business Logic |
| **Infraestrutura** | EF Core, Redis, RabbitMQ |
| **Cross-Cutting** | Serilog, FluentValidation, JWT |

---

## üß™ Testes

### Executar Testes

```bash
# Executar todos os testes
dotnet test

# Executar com detalhes
dotnet test --logger "console;verbosity=detailed"

# Executar com cobertura
dotnet test /p:CollectCoverage=true
```

### Cobertura de Testes

O projeto possui **19 testes unit√°rios** cobrindo:

#### üìä HeroTests (6 testes)
- ‚úÖ Her√≥i inicia no n√≠vel 1
- ‚úÖ C√°lculo de XP para pr√≥ximo n√≠vel
- ‚úÖ Level up com XP suficiente
- ‚úÖ Level up m√∫ltiplo
- ‚úÖ Preven√ß√£o de level up sem XP
- ‚úÖ Aumento de atributos ao subir n√≠vel

#### üìä QuestServiceTests (7 testes)
- ‚úÖ Aplica√ß√£o de recompensas
- ‚úÖ Level up ao completar quest
- ‚úÖ Valida√ß√£o de her√≥i n√£o encontrado
- ‚úÖ Valida√ß√£o de quest n√£o encontrada
- ‚úÖ Valida√ß√£o de quest j√° completada
- ‚úÖ Publica√ß√£o de evento RabbitMQ
- ‚úÖ Invalida√ß√£o de cache

#### üìä ValidatorTests (6 testes)
- ‚úÖ Valida√ß√£o de registro v√°lido
- ‚úÖ Username muito curto
- ‚úÖ Email inv√°lido
- ‚úÖ Classe de her√≥i inv√°lida
- ‚úÖ Atributos fora do range
- ‚úÖ Dificuldade de quest inv√°lida

### M√©tricas

```
‚úÖ 19 testes passando
‚ö° Tempo m√©dio: < 1 segundo
üìä Cobertura: ~80% das regras de neg√≥cio
```

---

## ‚öôÔ∏è Vari√°veis de Ambiente

### Arquivo: `appsettings.json`

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=postgres;Port=5432;Database=rpgquestmanager;...",
    "Redis": "redis:6379"
  },
  "Jwt": {
    "Key": "SUA_CHAVE_SECRETA_AQUI",
    "Issuer": "RpgQuestManager",
    "Audience": "RpgQuestManager"
  },
  "RabbitMQ": {
    "Host": "rabbitmq",
    "Username": "guest",
    "Password": "guest"
  }
}
```

### Configura√ß√£o via Docker Compose

As vari√°veis s√£o injetadas automaticamente pelo `docker-compose.yml`:

```yaml
environment:
  - ConnectionStrings__DefaultConnection=Host=postgres;...
  - ConnectionStrings__Redis=redis:6379
  - RabbitMQ__Host=rabbitmq
```

---

## üîß Troubleshooting

### Problemas Comuns

#### ‚ùå Docker n√£o inicia

**Erro**: `Cannot connect to the Docker daemon`

**Solu√ß√£o**:
1. Certifique-se que o Docker Desktop est√° rodando
2. Reinicie o Docker Desktop
3. No Windows, verifique se o WSL2 est√° ativo

#### ‚ùå Porta j√° em uso

**Erro**: `Bind for 0.0.0.0:5000 failed: port is already allocated`

**Solu√ß√£o**:
```bash
# Parar todos os containers
docker-compose down

# Verificar portas em uso
netstat -ano | findstr :5000  # Windows
lsof -i :5000                 # Linux/Mac

# Mudar a porta no docker-compose.yml
ports:
  - "5001:80"  # Ao inv√©s de 5000:80
```

#### ‚ùå Migrations n√£o aplicadas

**Erro**: `Cannot create database`

**Solu√ß√£o**:
```bash
# Recriar o banco
docker-compose down -v
docker-compose up --build
```

#### ‚ùå RabbitMQ n√£o conecta

**Erro**: `Unable to connect to RabbitMQ`

**Solu√ß√£o**:
Aguarde mais tempo. O RabbitMQ leva ~30 segundos para inicializar completamente.

---

## üó∫Ô∏è Roadmap

### Pr√≥ximas Funcionalidades

- [ ] üéÆ Sistema de combate em tempo real
- [ ] üèÜ Sistema de conquistas e badges
- [ ] üë• Sistema de guildas/cl√£s
- [ ] üí¨ Chat em tempo real (SignalR)
- [ ] üìä Dashboard com estat√≠sticas
- [ ] üåç Sistema de regi√µes e mapas
- [ ] ‚öîÔ∏è PvP (Player vs Player)
- [ ] üé≤ Sistema de crafting de itens
- [ ] üì± App Mobile (React Native)
- [ ] üîÑ GraphQL API

### Melhorias T√©cnicas

- [ ] üîê Refresh tokens
- [ ] üì¶ CQRS pattern
- [ ] üéØ Event Sourcing
- [ ] üß™ Testes de integra√ß√£o
- [ ] üìà Monitoramento (Prometheus + Grafana)
- [ ] üöÄ CI/CD (GitHub Actions)
- [ ] ‚òÅÔ∏è Deploy em Cloud (Azure/AWS)

---

## ü§ù Contribuindo

Contribui√ß√µes s√£o bem-vindas! Siga estes passos:

### 1. Fork o Projeto

```bash
git clone https://github.com/seu-usuario/rpg-quest-manager.git
cd rpg-quest-manager
```

### 2. Crie uma Branch

```bash
git checkout -b feature/MinhaNovaFeature
```

### 3. Commit suas Mudan√ßas

```bash
git commit -m "feat: adiciona MinhaNovaFeature"
```

Siga o padr√£o de commits:
- `feat:` - Nova funcionalidade
- `fix:` - Corre√ß√£o de bug
- `docs:` - Documenta√ß√£o
- `test:` - Testes
- `refactor:` - Refatora√ß√£o

### 4. Push para o GitHub

```bash
git push origin feature/MinhaNovaFeature
```

### 5. Abra um Pull Request

Descreva suas mudan√ßas detalhadamente!

---

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

---

## üôè Agradecimentos

- **Conselho dos Anci√£os de Eldoria** - Por propor o desafio √©pico
- **.NET Foundation** - Pela excelente plataforma
- **Comunidade Open Source** - Pelas ferramentas incr√≠veis

---

## üìû Contato

**Eldoria Dev Team**

- üìß Email: dev@eldoria.com
- üåê Website: https://eldoria.dev
- üí¨ Discord: [Servidor Eldoria](https://discord.gg/eldoria)

---

<div align="center">

### üêâ **"Her√≥is n√£o nascem prontos. Eles s√£o forjados na batalha."** ‚öîÔ∏è

**Desenvolvido com ‚ù§Ô∏è e muito ‚òï por aventureiros do c√≥digo**

[![GitHub Stars](https://img.shields.io/github/stars/seu-usuario/rpg-quest-manager?style=social)](https://github.com/seu-usuario/rpg-quest-manager/stargazers)
[![GitHub Forks](https://img.shields.io/github/forks/seu-usuario/rpg-quest-manager?style=social)](https://github.com/seu-usuario/rpg-quest-manager/network/members)

</div>
