# ü§ù Guia de Contribui√ß√£o - RPG Quest Manager

## üìã √çndice

- [Como Contribuir](#-como-contribuir)
- [Configura√ß√£o do Ambiente](#-configura√ß√£o-do-ambiente)
- [Padr√µes de C√≥digo](#-padr√µes-de-c√≥digo)
- [Fluxo de Desenvolvimento](#-fluxo-de-desenvolvimento)
- [Testes](#-testes)
- [Documenta√ß√£o](#-documenta√ß√£o)
- [Pull Requests](#-pull-requests)
- [Code Review](#-code-review)

## üöÄ Como Contribuir

### 1. Fork e Clone
```bash
# Fork o reposit√≥rio no GitHub
# Clone seu fork
git clone https://github.com/SEU_USUARIO/rpg-quest-manager.git
cd rpg-quest-manager
```

### 2. Configurar Remote
```bash
# Adicionar remote original
git remote add upstream https://github.com/ORIGINAL_OWNER/rpg-quest-manager.git

# Verificar remotes
git remote -v
```

### 3. Criar Branch
```bash
# Atualizar main
git checkout main
git pull upstream main

# Criar branch para feature
git checkout -b feature/nova-funcionalidade
```

## ‚öôÔ∏è Configura√ß√£o do Ambiente

### Pr√©-requisitos
- [.NET 8 SDK](https://dotnet.microsoft.com/download/dotnet/8.0)
- [Node.js 18+](https://nodejs.org/)
- [Docker](https://www.docker.com/) (opcional)
- [Git](https://git-scm.com/)

### Setup Local
```bash
# Backend
cd src/RpgQuestManager.Api
dotnet restore
dotnet ef database update
dotnet run

# Frontend
cd frontend
npm install
npm run dev

# Docker (alternativo)
docker-compose up
```

### Verificar Instala√ß√£o
```bash
# Backend
dotnet --version
dotnet ef --version

# Frontend
node --version
npm --version

# Docker
docker --version
docker-compose --version
```

## üìù Padr√µes de C√≥digo

### Backend (C#)

#### Nomenclatura
```csharp
// Classes: PascalCase
public class UserService { }

// M√©todos: PascalCase
public async Task<User> GetUserAsync(int id) { }

// Propriedades: PascalCase
public string Name { get; set; }

// Vari√°veis locais: camelCase
var userData = await GetUserAsync(id);

// Constantes: PascalCase
public const string DefaultConnectionString = "...";

// Campos privados: _camelCase
private readonly ApplicationDbContext _context;
```

#### Estrutura de Arquivos
```
Controllers/
‚îú‚îÄ‚îÄ AuthController.cs
‚îú‚îÄ‚îÄ CharactersController.cs
‚îî‚îÄ‚îÄ ...

Services/
‚îú‚îÄ‚îÄ IAuthService.cs
‚îú‚îÄ‚îÄ AuthService.cs
‚îî‚îÄ‚îÄ ...

Models/
‚îú‚îÄ‚îÄ User.cs
‚îú‚îÄ‚îÄ Character.cs
‚îî‚îÄ‚îÄ ...
```

#### Exemplo de Controller
```csharp
[ApiController]
[Route("api/[controller]")]
public class UsersController : ControllerBase
{
    private readonly IUserService _userService;
    private readonly ILogger<UsersController> _logger;

    public UsersController(IUserService userService, ILogger<UsersController> logger)
    {
        _userService = userService;
        _logger = logger;
    }

    [HttpGet("{id}")]
    public async Task<ActionResult<User>> GetUser(int id)
    {
        try
        {
            var user = await _userService.GetUserAsync(id);
            if (user == null)
                return NotFound();

            return Ok(user);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Error getting user {UserId}", id);
            return StatusCode(500, "Internal server error");
        }
    }
}
```

#### Exemplo de Service
```csharp
public interface IUserService
{
    Task<User> GetUserAsync(int id);
    Task<User> CreateUserAsync(CreateUserRequest request);
    Task<bool> UpdateUserAsync(int id, UpdateUserRequest request);
    Task<bool> DeleteUserAsync(int id);
}

public class UserService : IUserService
{
    private readonly ApplicationDbContext _context;
    private readonly ILogger<UserService> _logger;

    public UserService(ApplicationDbContext context, ILogger<UserService> logger)
    {
        _context = context;
        _logger = logger;
    }

    public async Task<User> GetUserAsync(int id)
    {
        return await _context.Users
            .Include(u => u.Characters)
            .FirstOrDefaultAsync(u => u.Id == id);
    }

    // ... outros m√©todos
}
```

### Frontend (TypeScript/React)

#### Nomenclatura
```typescript
// Componentes: PascalCase
export function UserProfile() { }

// Hooks: camelCase
const useUserData = () => { };

// Fun√ß√µes: camelCase
const getUserData = async () => { };

// Vari√°veis: camelCase
const userData = await getUserData();

// Constantes: UPPER_SNAKE_CASE
const API_BASE_URL = 'http://localhost:5000';

// Interfaces: PascalCase
interface User {
  id: number;
  name: string;
}

// Types: PascalCase
type UserStatus = 'active' | 'inactive';
```

#### Estrutura de Componentes
```typescript
// UserProfile.tsx
import { useState, useEffect } from 'react';
import { Card } from '../components/ui/Card';
import { Button } from '../components/ui/Button';
import { useUser } from '../contexts/UserContext';

interface UserProfileProps {
  userId: number;
  onUpdate?: (user: User) => void;
}

export function UserProfile({ userId, onUpdate }: UserProfileProps) {
  const { user, updateUser } = useUser();
  const [loading, setLoading] = useState(false);

  const handleUpdate = async () => {
    setLoading(true);
    try {
      await updateUser(userId, { name: 'New Name' });
      onUpdate?.(user);
    } catch (error) {
      console.error('Error updating user:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <Card title="User Profile">
      <div className="space-y-4">
        <p>Name: {user?.name}</p>
        <Button onClick={handleUpdate} loading={loading}>
          Update
        </Button>
      </div>
    </Card>
  );
}
```

#### Estrutura de Hooks
```typescript
// useUser.ts
import { useState, useEffect } from 'react';
import { userService } from '../services/user';

export function useUser() {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    loadUser();
  }, []);

  const loadUser = async () => {
    try {
      setLoading(true);
      const userData = await userService.getCurrentUser();
      setUser(userData);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
    } finally {
      setLoading(false);
    }
  };

  const updateUser = async (id: number, data: Partial<User>) => {
    try {
      const updatedUser = await userService.updateUser(id, data);
      setUser(updatedUser);
      return updatedUser;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Update failed');
      throw err;
    }
  };

  return {
    user,
    loading,
    error,
    updateUser,
    refreshUser: loadUser
  };
}
```

## üîÑ Fluxo de Desenvolvimento

### 1. Planejamento
- [ ] Analisar requisitos
- [ ] Verificar se j√° existe funcionalidade similar
- [ ] Planejar implementa√ß√£o (backend + frontend)
- [ ] Identificar depend√™ncias

### 2. Implementa√ß√£o
- [ ] Criar branch para feature
- [ ] Implementar backend primeiro
- [ ] Implementar frontend
- [ ] Testar integra√ß√£o
- [ ] Documentar mudan√ßas

### 3. Testes
- [ ] Testes unit√°rios
- [ ] Testes de integra√ß√£o
- [ ] Testes manuais
- [ ] Verificar performance
- [ ] Verificar acessibilidade

### 4. Documenta√ß√£o
- [ ] Atualizar README se necess√°rio
- [ ] Documentar APIs
- [ ] Atualizar tutorial se necess√°rio
- [ ] Comentar c√≥digo complexo

### 5. Pull Request
- [ ] Criar PR descritivo
- [ ] Linkar issues relacionadas
- [ ] Adicionar screenshots se aplic√°vel
- [ ] Solicitar review

## üß™ Testes

### Backend
```bash
# Executar todos os testes
dotnet test

# Executar testes espec√≠ficos
dotnet test --filter "UserService"

# Executar com cobertura
dotnet test --collect:"XPlat Code Coverage"
```

### Frontend
```bash
# Executar testes
npm run test

# Executar com cobertura
npm run test:coverage

# Executar em modo watch
npm run test:watch
```

### Testes Manuais
- [ ] Testar funcionalidade completa
- [ ] Verificar diferentes cen√°rios
- [ ] Testar em diferentes navegadores
- [ ] Verificar responsividade
- [ ] Testar acessibilidade

## üìö Documenta√ß√£o

### Obrigat√≥rio Atualizar
- **README.md** - Para mudan√ßas estruturais
- **API Documentation** - Para novos endpoints
- **Tutorial** - Para novas funcionalidades
- **Coment√°rios no c√≥digo** - Para l√≥gica complexa

### Exemplo de Documenta√ß√£o de API
```csharp
/// <summary>
/// Obt√©m um usu√°rio pelo ID
/// </summary>
/// <param name="id">ID do usu√°rio</param>
/// <returns>Dados do usu√°rio</returns>
/// <response code="200">Usu√°rio encontrado</response>
/// <response code="404">Usu√°rio n√£o encontrado</response>
/// <response code="500">Erro interno do servidor</response>
[HttpGet("{id}")]
[ProducesResponseType(typeof(User), 200)]
[ProducesResponseType(404)]
[ProducesResponseType(500)]
public async Task<ActionResult<User>> GetUser(int id)
{
    // Implementa√ß√£o
}
```

### Exemplo de Documenta√ß√£o de Componente
```typescript
/**
 * Componente de perfil do usu√°rio
 * 
 * @param userId - ID do usu√°rio a ser exibido
 * @param onUpdate - Callback chamado quando o usu√°rio √© atualizado
 * @param showActions - Se deve mostrar bot√µes de a√ß√£o
 */
export function UserProfile({ 
  userId, 
  onUpdate, 
  showActions = true 
}: UserProfileProps) {
  // Implementa√ß√£o
}
```

## üîÄ Pull Requests

### Template de PR
```markdown
## üìã Descri√ß√£o
Breve descri√ß√£o das mudan√ßas implementadas.

## üéØ Tipo de Mudan√ßa
- [ ] Bug fix
- [ ] Nova funcionalidade
- [ ] Breaking change
- [ ] Documenta√ß√£o
- [ ] Refatora√ß√£o
- [ ] Performance
- [ ] Testes

## üß™ Como Testar
1. Passo 1
2. Passo 2
3. Passo 3

## üì∏ Screenshots
(Se aplic√°vel)

## ‚úÖ Checklist
- [ ] C√≥digo segue os padr√µes do projeto
- [ ] Testes passam
- [ ] Documenta√ß√£o atualizada
- [ ] N√£o quebra funcionalidades existentes
- [ ] Performance verificada

## üîó Issues Relacionadas
Closes #123
```

### Regras para PR
- **T√≠tulo descritivo** - Ex: "feat: adiciona sistema de notifica√ß√µes"
- **Descri√ß√£o detalhada** - O que foi implementado e por qu√™
- **Screenshots** - Para mudan√ßas visuais
- **Testes** - Como testar as mudan√ßas
- **Checklist** - Verifica√ß√µes obrigat√≥rias

## üëÄ Code Review

### Crit√©rios de Aprova√ß√£o
- [ ] **Funcionalidade** - Implementa corretamente o requisito
- [ ] **Qualidade** - C√≥digo limpo e bem estruturado
- [ ] **Performance** - N√£o impacta negativamente
- [ ] **Seguran√ßa** - N√£o introduz vulnerabilidades
- [ ] **Testes** - Cobertura adequada
- [ ] **Documenta√ß√£o** - Atualizada e clara

### Processo de Review
1. **Revisar c√≥digo** - Estrutura, l√≥gica, padr√µes
2. **Testar funcionalidade** - Verificar se funciona
3. **Verificar testes** - Se cobrem os cen√°rios
4. **Comentar** - Sugest√µes e melhorias
5. **Aprovar** - Quando estiver satisfeito

### Exemplo de Coment√°rios
```typescript
// ‚ùå Evitar
// This is wrong

// ‚úÖ Preferir
// Consider using useCallback here to prevent unnecessary re-renders
// or
// This could be extracted to a custom hook for reusability
```

## üêõ Reportar Bugs

### Template de Bug Report
```markdown
## üêõ Descri√ß√£o do Bug
Descri√ß√£o clara e concisa do bug.

## üîÑ Passos para Reproduzir
1. V√° para '...'
2. Clique em '...'
3. Role at√© '...'
4. Veja o erro

## ‚úÖ Comportamento Esperado
O que deveria acontecer.

## ‚ùå Comportamento Atual
O que est√° acontecendo.

## üì∏ Screenshots
(Se aplic√°vel)

## üñ•Ô∏è Ambiente
- OS: [ex: Windows 10]
- Browser: [ex: Chrome 91]
- Version: [ex: 1.2.3]

## üìã Informa√ß√µes Adicionais
Qualquer informa√ß√£o adicional relevante.
```

## üí° Sugest√µes de Melhorias

### Template de Feature Request
```markdown
## üí° Sugest√£o de Melhoria
Descri√ß√£o clara da funcionalidade desejada.

## üéØ Problema que Resolve
Qual problema esta funcionalidade resolveria.

## üí≠ Solu√ß√£o Proposta
Como voc√™ imagina que deveria funcionar.

## üîÑ Alternativas Consideradas
Outras solu√ß√µes que voc√™ considerou.

## üìã Informa√ß√µes Adicionais
Qualquer informa√ß√£o adicional relevante.
```

## üè∑Ô∏è Versionamento

### Sem√¢ntico (SemVer)
- **MAJOR** - Mudan√ßas incompat√≠veis
- **MINOR** - Novas funcionalidades compat√≠veis
- **PATCH** - Corre√ß√µes de bugs

### Exemplos
- `1.0.0` - Vers√£o inicial
- `1.1.0` - Nova funcionalidade
- `1.1.1` - Corre√ß√£o de bug
- `2.0.0` - Breaking change

## üìû Suporte

### Canais de Comunica√ß√£o
- **GitHub Issues** - Para bugs e feature requests
- **GitHub Discussions** - Para d√∫vidas e discuss√µes
- **Pull Requests** - Para contribui√ß√µes

### Resposta Esperada
- **Issues** - 48 horas
- **Pull Requests** - 72 horas
- **Discussions** - 24 horas

## üéâ Reconhecimento

### Contribuidores
Todos os contribuidores s√£o reconhecidos no README e releases.

### Tipos de Contribui√ß√£o
- **C√≥digo** - Implementa√ß√£o de funcionalidades
- **Documenta√ß√£o** - Melhoria da documenta√ß√£o
- **Testes** - Adi√ß√£o de testes
- **Design** - Melhoria da interface
- **Ideias** - Sugest√µes e feedback

---

**Obrigado por contribuir! üöÄ**
